# RVO, NRVO 

**(Named) Return Value Optimization** е оптимизация, предоставена от повечето съвременни C++ компилатори. Тя цели избягването на излишни копирания (извикването на копиращи конструктори) на временни обекти (например върнати по копие от функция).

**Пример:**

```c++
class A
{
private:
    int a;
    
public:
    A() : a(0)
    {}
    
    A(int a) : a(a)
    {}
};


A makeObj()
{
    return A(5);
}

int main()
{   
    A obj1 = makeObj(); // Заради RVO ще се извика само конструктора с един параметър на временния обект,
                        // върнат от функцията. Няма да се извърши копиране.
    
    А obj2 = A(2); // Отново RVO, избягва се копиране на временен обект
    
    А obj3; // default-ен конструктор
    Obj3 = makeObj(); // Тук няма RVO, първо се създава временния обект от функцията, след това
                     // се присвоява от вече съществуващия obj3 с оператор =
    
    return 0;
}
```

Примерът за **NRVO** е аналогичен, но с разликата, че върнатия от функцията обект се създава по-рано в нейния scope.
```c++
A makeObj()
{
    A obj(5);
    return obj;
}
```

